%%{ init: { 'theme': 'base', 'flowchart': { 'fontSize': 25 }, 'themeVariables': { 'primaryColor': '#CEE7FF', 'secondaryColor': '#FFE5B4', 'tertiaryColor': '#E2F0CB', 'primaryTextColor': '#000000' } } }%%
flowchart TD
    Start(["System receives booking request"]) --> ReceiveSearch["Receive search criteria (location, date, capacity)"]
    ReceiveSearch --> SearchVenues["Search venue database"]
    SearchVenues --> HasResults{"Results found?"}
    HasResults -- No --> NoResults["Display No results found"]
    HasResults -- Yes --> DisplayVenues["Display venue list"]
    DisplayVenues --> ReceiveSelection["Receive venue selection"]
    ReceiveSelection --> CheckAvailability["Check venue availability"]
    CheckAvailability --> IsAvailable{"Available?"}
    IsAvailable -- No --> DisplayAlternatives["Display alternative dates"]
    IsAvailable -- Yes --> ReceiveAddToCart["Receive add to cart request"]
    ReceiveAddToCart --> CheckCustomerEvents["Check customer events"]
    CheckCustomerEvents --> HasEvents{"Events exist?"}
    HasEvents -- No --> EventsNotFound["Display Events not found"]
    HasEvents -- Yes --> DisplayEventOptions["Display events"]
    DisplayEventOptions --> ReceiveEventChoice["Receive event choice"]
    ReceiveEventChoice --> LinkToEvent["Link venue to event"]
    LinkToEvent --> AddToCart["Add venue to cart"]
    AddToCart --> DisplayCart["Display cart"]
    DisplayCart --> ProcessPayment
    ProcessPayment --> PaymentResult{"Payment successful?"}
    PaymentResult -- No --> PaymentError["Display Payment error"]
    PaymentResult -- Yes --> ConfirmBookings["Confirm all bookings"]
    ConfirmBookings --> SendConfirmations["Send confirmations"]
    SendConfirmations --> Success(["Booking complete"])
    n1["Anchor"]

    n1@{ shape: anchor}
    style Start fill:#90EE90
    style Success fill:#90EE90      

classDef success fill:#A1D99B,stroke:#2E8540,color:#000000
classDef error fill:#FBB,stroke:#AA0000,color:#000000
class Start,Success success
class PaymentError,EventsNotFound error


